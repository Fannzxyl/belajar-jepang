<!DOCTYPE html>
<html lang="id" data-theme="pastel">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
    <title>Flashcard Kana Jepang — Latihan</title>
    <meta name="description" content="Latih Hiragana & Katakana dengan metode flashcard interaktif. Balik kartu untuk melihat jawaban, navigasi mudah, dan pilih set kana yang ingin dipelajari." />
    <meta name="theme-color" content="#7a6cff">

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Noto+Sans+JP:wght@400;700&family=Noto+Serif+JP:wght@700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css">
    <style>
        /* Menggunakan style yang sama dari index.html untuk konsistensi */
        :root{
            --bg:#f8fbff; --panel:#ffffff; --soft:#f2f6ff; --ink:#132030; --muted:#76849c;
            --pri:#7a6cff; --sec:#16c6a1; --warn:#ff7b7b; --ok:#2fb875; --accent:#ffd166;
            --btn:#e9eefc; --btnText:#0b101a; --border:rgba(19,32,48,.10);
            --radius:18px; --shadow:0 6px 18px rgba(15,23,34,.08);
            --ring: 0 0 0 3px rgba(122,108,255,.28);
            --okBg:#dff4ea;
            --warnBg:#ffe5e5;
            --iconColor: var(--muted);
            --transition-duration: 0.2s;
        }
        [data-theme="hc"]{
            --bg:#0a0f1a; --panel:#0f1626; --soft:#0c1220; --ink:#e6efff; --muted:#9fb0cc;
            --pri:#8fa8ff; --sec:#3dd8b5; --warn:#ff8c8c; --ok:#7be0b3; --accent:#ffd98a;
            --btn:#18243a;
            --btnText:#e6efff;
            --border:rgba(230,239,255,.12);
            --ring: 0 0 0 3px rgba(143,168,255,.35);
            --okBg:#1a3a2e;
            --warnBg:#3a1a1a;
            --iconColor: var(--ink);
        }
        *{box-sizing:border-box}
        html, body { max-width: 100%; overflow-x: hidden; }
        body {
            min-height: 100svh;
            margin:0;font-family:'Inter', system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;background:
            radial-gradient(900px 420px at -10% -20%, rgba(122,108,255,.10), transparent),
            radial-gradient(900px 420px at 110% -30%, rgba(22,198,161,.12), transparent),
            var(--bg);color:var(--ink);
            transition: background-color var(--transition-duration) ease-out, color var(--transition-duration) ease-out;
        }
        .wrap{
            max-width: 720px;
            margin: auto;
            padding: 16px;
            padding-left: calc(16px + env(safe-area-inset-left));
            padding-right: calc(16px + env(safe-area-inset-right));
        }
        header{position:sticky;top:0;z-index:30;background:linear-gradient(180deg, rgba(255,255,255,.92), rgba(255,255,255,.72));backdrop-filter: blur(8px);border-bottom:1px solid var(--border); padding-top:env(safe-area-inset-top);
        transition: background var(--transition-duration) ease-out, backdrop-filter var(--transition-duration) ease-out, border-bottom-color var(--transition-duration) ease-out;}
        [data-theme="hc"] header{background:linear-gradient(180deg, rgba(15,22,38,.86), rgba(15,22,38,.66))}
        
        .brand{ display:flex; align-items:center; gap:12px; justify-content: space-between; flex-wrap: wrap; }
        .logo{width:36px;height:36px;border-radius:12px;background:linear-gradient(135deg,var(--pri),var(--sec));box-shadow:var(--shadow);
        transition: box-shadow var(--transition-duration) ease-out, background var(--transition-duration) ease-out;}
        h1{font-size:20px;margin:0}
        .small{font-size:12px;color:var(--muted)}
        .card{background:var(--panel);border-radius:var(--radius);box-shadow:var(--shadow);padding:16px;border:1px solid var(--border);
        transition: background-color var(--transition-duration) ease-out, border-color var(--transition-duration) ease-out, box-shadow var(--transition-duration) ease-out;}
        .card h2{font-size:16px;margin:0 0 10px 0; display: flex; align-items: center; gap: 8px;}
        .card h2 .icon { color: var(--iconColor); transition: color var(--transition-duration) ease-out;}
        .row{display:flex;gap:8px;flex-wrap:wrap;align-items:center}
        .btn{ min-height:52px; padding: 0 16px; border-radius: 12px; border: none; cursor: pointer; font-size: 14px; font-weight: 500; transition: all var(--transition-duration) ease-out; color: var(--ink); background: var(--btn); display: flex; align-items: center; justify-content: center; gap: 8px; text-decoration: none; }
        .btn:active{transform:translateY(1px)}
        .btn.primary{ background:linear-gradient(135deg, var(--pri), var(--sec)); color:white; }
        .btn.ghost{background:transparent;outline:1px solid var(--border); color: var(--ink);}
        .btn:focus-visible{outline:none; box-shadow:var(--ring); outline-offset: 3px;}
        select{ width:100%;padding:12px;border-radius:12px;border:1px solid var(--border);background:var(--soft);color:var(--ink); transition: border-color var(--transition-duration) ease-out, background-color var(--transition-duration) ease-out, box-shadow var(--transition-duration) ease-out; -webkit-appearance: none; -moz-appearance: none; appearance: none; background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='%2376849c' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpolyline points='6 9 12 15 18 9'%3E%3C/polyline%3E%3C/svg%3E"); background-repeat: no-repeat; background-position: right 12px center; background-size: 16px; padding-right: 36px; }
        select:focus { border-color: var(--pri); outline: none; box-shadow: var(--ring); }
        .spacer{height:10px}
        .main-nav{ display:none !important; } /* Sembunyiin main-nav lama */

        /* Style khusus untuk Flashcard */
        .flashcard-container {
            perspective: 1000px;
            min-height: 300px;
            cursor: pointer;
        }
        .flashcard {
            width: 100%;
            height: 300px;
            position: relative;
            transform-style: preserve-3d;
            transition: transform 0.6s;
        }
        .flashcard.is-flipped {
            transform: rotateY(180deg);
        }
        .flashcard-face {
            position: absolute;
            width: 100%;
            height: 100%;
            backface-visibility: hidden;
            display: flex;
            align-items: center;
            justify-content: center;
            font-family: 'Noto Sans JP', 'Noto Serif JP', sans-serif;
            border-radius: var(--radius);
            box-shadow: var(--shadow);
            border: 1px solid var(--border);
        }
        .flashcard-front {
            background: var(--panel);
            font-size: clamp(80px, 25vw, 150px);
        }
        .flashcard-back {
            background: var(--soft);
            transform: rotateY(180deg);
            font-size: clamp(40px, 15vw, 80px);
            color: var(--muted);
        }
        .flashcard-nav {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 16px;
        }
        #cardCounter {
            font-size: 14px;
            color: var(--muted);
        }

        /* === Sidebar === */
        .sidebar{
            position:fixed; top:0; left:-300px; width:280px; height:100%;
            background:var(--panel); box-shadow:var(--shadow); z-index:1000;
            transition:left .3s ease-in-out; padding:20px; padding-top:calc(20px + env(safe-area-inset-top));
            display:flex; flex-direction:column; gap:10px; overflow-y:auto; border-right:1px solid var(--border);
        }
        .sidebar.is-open{ left:0; }
        .sidebar .menu{ list-style:none; margin:0; padding:0; }
        .sidebar .menu li a{ display:flex; gap:.5rem; align-items:center; padding:.75rem 1rem; border-radius:12px; color:var(--ink); text-decoration:none; }
        .sidebar .menu li a:hover{ background:var(--soft); }
        .sidebar .menu li a.active{ background:rgba(122,108,255,.12); font-weight:600; }
        .sidebar-toggle-btn{
            position:fixed; top:16px; left:16px; z-index:1001; background:var(--btn); border:1px solid var(--border);
            border-radius:50%; width:44px; height:44px; display:flex; align-items:center; justify-content:center; cursor:pointer; box-shadow:var(--shadow);
        }
        .sidebar-toggle-btn i{ color:var(--ink); font-size:20px; }
        @media (min-width:768px){
            body.sidebar-open{ padding-left:280px; }
            .sidebar-toggle-btn{ left:16px; }
        }
        @media (max-width:640px){ .sidebar{ width:84vw; max-width:320px; } }

        /* Header padding biar gak ketutup tombol (opsional, rapi di HP) */
        header .brand{ position:relative; z-index:1002; padding-left:60px; }
        @media (max-width:767px){ header .brand{ padding-left:0; } .sidebar-toggle-btn{ top:calc(16px + env(safe-area-inset-top)); } }

        /* Form control responsivity */
        input, select{ width:100%; min-width:0; }
        /* Pastikan select bisa ditap & tidak ketutup */
        #rangeMode, #testFrom, #testTo, #testSingleGroup{
            width:100%; min-width:0; pointer-events:auto; position:relative; z-index:1;
        }

    </style>
</head>
<body>
    <!-- Sidebar Toggle Button -->
    <button id="sidebarToggle" class="sidebar-toggle-btn" aria-label="Toggle Sidebar">
        <i class="fa-solid fa-bars"></i>
    </button>

    <!-- Sidebar Content -->
    <nav id="sidebar" class="sidebar">
        <div class="row" style="justify-content: space-between; align-items: center;">
            <h3 style="margin:0;">Navigasi</h3>
            <button class="btn ghost" id="closeSidebar" aria-label="Tutup Sidebar">
                <i class="fa-solid fa-times"></i>
            </button>
        </div>
        <hr style="border:none;border-top:1px solid var(--border);width:100%;">
        <ul class="menu">
            <li><a href="index.html">📘 Latihan</a></li>
            <li><a href="index2.html" class="active">🗂️ Flashcard</a></li>
            <li><a href="index3.html">🧮 Tabel Kana</a></li>
            <li><a href="index4.html">🗒️ Kosakata</a></li>
            <li><a href="index5.html">💬 Ungkapan</a></li>
            <li><a href="index7.html">🧠 Tebak Arti</a></li> <!-- Penambahan: Item menu "Tebak Arti" -->
            <li><a href="index6.html">✍️ Menulis</a></li>
        </ul>
    </nav>

    <header>
        <div class="wrap">
            <div class="brand">
                <svg class="logo" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 64 64" width="36" height="36">
                    <defs>
                        <linearGradient id="g" x1="0" y1="0" x2="1" y2="1">
                            <stop stop-color="#7a6cff"/><stop offset="1" stop-color="#16c6a1"/>
                        </linearGradient>
                    </defs>
                    <rect width="64" height="64" rx="14" fill="url(#g)"/>
                    <text x="50%" y="50%" text-anchor="middle" dominant-baseline="middle"
                          font-family="Noto Sans JP, 'Noto Serif JP', system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif"
                          font-size="38" fill="white" dy="-2">あ</text>
                </svg>
                <div>
                    <h1>Pelatih Kana Jepang</h1>
                    <div class="small">Flashcard untuk menghafal Hiragana & Katakana</div>
                </div>
            </div>
             <!-- NAVIGASI UTAMA (OLD - HIDDEN) -->
             <nav class="main-nav">
                <div class="row">
                    <a href="index.html" class="btn ghost"><i class="fa-solid fa-home"></i> Latihan</a>
                    <a href="index2.html" class="btn primary"><i class="fa-solid fa-clone"></i> Flashcard</a>
                    <a href="index3.html" class="btn ghost"><i class="fa-solid fa-table"></i> Tabel Kana</a>
                    <a href="index4.html" class="btn ghost"><i class="fa-solid fa-book-open"></i> Kosakata</a>
                    <a href="index5.html" class="btn ghost"><i class="fa-solid fa-comments"></i> Ungkapan</a>
                </div>
            </nav>
        </div>
    </header>

    <main class="wrap">
        <div class="card">
            <h2><i class="fa-solid fa-clone icon"></i> Mode Flashcard</h2>
            <div class="small">Pilih set kana, lalu ketuk kartu untuk melihat romaji. Gunakan tombol panah untuk navigasi.</div>
            <div class="spacer"></div>
            <div class="row">
                <select id="setSelection" aria-label="Pilih set kana">
                    <option value="hira">Hiragana (Semua)</option>
                    <option value="kata">Katakana (Semua)</option>
                    <option value="hira_base">Hiragana (Dasar)</option>
                    <option value="kata_base">Katakana (Dasar)</option>
                    <option value="hira_daku">Hiragana (Dakuon/Handakuon)</option>
                    <option value="kata_daku">Katakana (Dakuon/Handakuon)</option>
                    <option value="hira_you">Hiragana (Youon)</option>
                    <option value="kata_you">Katakana (Youon)</option>
                </select>
                <button id="shuffleBtn" class="btn"><i class="fa-solid fa-shuffle"></i> Acak Kartu</button>
            </div>
        </div>

        <div class="spacer"></div>

        <div id="flashcardContainer" class="flashcard-container">
            <div class="flashcard" id="flashcard">
                <div class="flashcard-face flashcard-front" id="cardFront">あ</div>
                <div class="flashcard-face flashcard-back" id="cardBack">a</div>
            </div>
        </div>

        <div class="flashcard-nav">
            <button id="prevBtn" class="btn ghost"><i class="fa-solid fa-arrow-left"></i> Sebelumnya</button>
            <div id="cardCounter">1 / 46</div>
            <button id="nextBtn" class="btn ghost">Berikutnya <i class="fa-solid fa-arrow-right"></i></button>
        </div>

        <div class="spacer"></div>

        <!-- Penambahan: CTA card "Tebak Arti" -->
        <div class="card" id="cta-tebak-arti">
          <h2><i class="fa-solid fa-brain icon"></i> Tebak Arti (JP→ID)</h2>
          <div class="small">Kuis arti Jepang → Indonesia (A–D). Pilih kategori & jumlah soal.</div>
          <div class="spacer"></div>
          <div class="row" style="gap:8px;flex-wrap:wrap">
            <a class="btn primary" href="index7.html"><i class="fa-solid fa-play"></i> Mulai Tebak Arti</a>
            <a class="btn ghost" href="index7.html#kategori"><i class="fa-solid fa-list"></i> Pilih Kategori</a>
          </div>
        </div>
    </main>

    <script>
        // DATA KANA (Sama seperti di index.html)
        const BASE = ['a','i','u','e','o','ka','ki','ku','ke','ko','sa','shi','su','se','so','ta','chi','tsu','te','to','na','ni','nu','ne','no','ha','hi','fu','he','ho','ma','mi','mu','me','mo','ya','yu','yo','ra','ri','ru','re','ro','wa','wo','n'];
        const DAKUON = ['ga','gi','gu','ge','go','za','ji','zu','ze','zo','da','dji','dzu','de','do','ba','bi','bu','be','bo','pa','pi','pu','pe','po'];
        const YOUON = ['kya','kyu','kyo','sha','shu','sho','cha','chu','cho','nya','nyu','nyo','hya','hyu','hyo','mya','myu','myo','rya','ryu','ryo','gya','gyu','gyo','ja','ju','jo','bya','byu','byo','pya','pyu','pyo'];
        const HIRA_BASE = ['あ','い','う','え','お','か','き','く','け','こ','さ','し','す','せ','そ','た','ち','つ','て','と','な','に','ぬ','ね','の','は','ひ','ふ','へ','ほ','ま','み','む','め','も','や','ゆ','よ','ら','り','る','れ','ろ','わ','を','ん'];
        const KATA_BASE = ['ア','イ','ウ','エ','オ','カ','キ','ク','ケ','コ','サ','シ','ス','セ','ソ','タ','チ','ツ','テ','ト','ナ','ニ','ヌ','ネ','ノ','ハ','ヒ','フ','ヘ','ホ','マ','ミ','ム','メ','モ','ヤ','ユ','ヨ','ラ','リ','ル','レ','ロ','ワ','ヲ','ン'];
        const HIRA_DAKU = ['が','ぎ','ぐ','げ','ご','ざ','じ','ず','ぜ','ぞ','だ','ぢ','づ','で','ど','ば','び','ぶ','べ','ぼ','ぱ','ぴ','ぷ','ぺ','ぽ'];
        const KATA_DAKU = ['ガ','ギ','グ','ゲ','ゴ','ザ','ジ','ズ','ゼ','ゾ','ダ','ヂ','ヅ','デ','ド','バ','ビ','ブ','ベ','ボ','パ','ピ','プ','ペ','ポ'];
        const HIRA_YOU = ['きゃ','きゅ','きょ','しゃ','しゅ','しょ','ちゃ','ちゅ','ちょ','にゃ','にゅ','にょ','ひゃ','ひゅ','ひょ','みゃ','みゅ','みょ','りゃ','りゅ','りょ','ぎゃ','ぎゅ','ぎょ','じゃ','じゅ','じょ','びゃ','びゅ','びょ','ぴゃ','ぴゅ','ぴょ'];
        const KATA_YOU = ['キャ','キュ','キョ','シャ','シュ','ショ','チャ','チュ','チョ','ニャ','ニュ','ニョ','ヒャ','ヒュ','ヒョ','ミャ','ミュ','ミョ','リャ','リュ','リョ','ギャ','ギュ','ギョ','ジャ','ジュ','ジョ','ビャ','ビュ','ビョ','ピャ','ピュ','ピョ'];
        
        const HIRA_MAP = new Map();
        const KATA_MAP = new Map();
        BASE.forEach((r,i)=>{HIRA_MAP.set(r,HIRA_BASE[i]);KATA_MAP.set(r,KATA_BASE[i])});
        DAKUON.forEach((r,i)=>{HIRA_MAP.set(r,HIRA_DAKU[i]);KATA_MAP.set(r,KATA_DAKU[i])});
        YOUON.forEach((r,i)=>{HIRA_MAP.set(r,HIRA_YOU[i]);KATA_MAP.set(r,KATA_YOU[i])});

        // State Aplikasi Flashcard
        let deck = [];
        let currentIndex = 0;
        let currentSet = 'hira';

        // Elemen DOM
        const flashcard = document.getElementById('flashcard');
        const cardFront = document.getElementById('cardFront');
        const cardBack = document.getElementById('cardBack');
        const prevBtn = document.getElementById('prevBtn');
        const nextBtn = document.getElementById('nextBtn');
        const cardCounter = document.getElementById('cardCounter');
        const setSelection = document.getElementById('setSelection');
        const shuffleBtn = document.getElementById('shuffleBtn');

        function createDeck() {
            deck = [];
            currentIndex = 0;
            currentSet = setSelection.value;

            let romajiSet, kanaMap;

            switch(currentSet) {
                case 'hira':
                    romajiSet = [...BASE, ...DAKUON, ...YOUON];
                    kanaMap = HIRA_MAP;
                    break;
                case 'kata':
                    romajiSet = [...BASE, ...DAKUON, ...YOUON];
                    kanaMap = KATA_MAP;
                    break;
                case 'hira_base':
                    romajiSet = BASE;
                    kanaMap = HIRA_MAP;
                    break;
                case 'kata_base':
                    romajiSet = BASE;
                    kanaMap = KATA_MAP;
                    break;
                case 'hira_daku':
                    romajiSet = DAKUON;
                    kanaMap = HIRA_MAP;
                    break;
                case 'kata_daku':
                    romajiSet = DAKUON;
                    kanaMap = KATA_MAP;
                    break;
                case 'hira_you':
                    romajiSet = YOUON;
                    kanaMap = HIRA_MAP;
                    break;
                case 'kata_you':
                    romajiSet = YOUON;
                    kanaMap = KATA_MAP;
                    break;
            }

            romajiSet.forEach(romaji => {
                deck.push({ kana: kanaMap.get(romaji), romaji: romaji });
            });

            updateCard();
        }

        function updateCard() {
            if (deck.length === 0) return;

            const card = deck[currentIndex];
            cardFront.textContent = card.kana;
            cardBack.textContent = card.romaji;
            cardCounter.textContent = `${currentIndex + 1} / ${deck.length}`;
            
            // Reset flip state
            flashcard.classList.remove('is-flipped');
        }

        function shuffleDeck() {
            for (let i = deck.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [deck[i], deck[j]] = [deck[j], deck[i]];
            }
            currentIndex = 0;
            updateCard();
        }

        // Event Listeners
        flashcard.addEventListener('click', () => {
            flashcard.classList.toggle('is-flipped');
        });

        nextBtn.addEventListener('click', () => {
            currentIndex = (currentIndex + 1) % deck.length;
            updateCard();
        });

        prevBtn.addEventListener('click', () => {
            currentIndex = (currentIndex - 1 + deck.length) % deck.length;
            updateCard();
        });
        
        setSelection.addEventListener('change', createDeck);
        shuffleBtn.addEventListener('click', shuffleDeck);

        document.addEventListener('keydown', (e) => {
            if (e.key === 'ArrowRight') {
                nextBtn.click();
            } else if (e.key === 'ArrowLeft') {
                prevBtn.click();
            } else if (e.key === ' ') { // Spasi untuk membalik kartu
                e.preventDefault();
                flashcard.click();
            }
        });

        // Inisialisasi
        document.addEventListener('DOMContentLoaded', () => {
            createDeck();
            
            // Sidebar wiring
            const sidebar = document.getElementById('sidebar');
            const toggleBtn = document.getElementById('sidebarToggle');
            const closeBtn  = document.getElementById('closeSidebar');

            function openSidebar(){ sidebar.classList.add('is-open'); document.body.classList.add('sidebar-open'); }
            function closeSidebar(){ sidebar.classList.remove('is-open'); document.body.classList.remove('sidebar-open'); }

            toggleBtn?.addEventListener('click', openSidebar);
            closeBtn?.addEventListener('click', closeSidebar);
            // Tutup jika klik di luar (mobile)
            document.addEventListener('click', (e)=>{
                if(!sidebar.classList.contains('is-open')) return;
                // Check if the click is outside the sidebar AND outside the toggle button
                const isClickInsideSidebar = sidebar.contains(e.target);
                const isClickInsideToggleBtn = toggleBtn.contains(e.target);
                if(!isClickInsideSidebar && !isClickInsideToggleBtn) {
                    closeSidebar();
                }
            });

            // Set active link sesuai file saat ini
            document.querySelectorAll('#sidebar a').forEach(a=>{
                const href = a.getAttribute('href');
                if(href && location.pathname.endsWith(href)) a.classList.add('active');
            });

            // Aksesibilitas: ESC untuk tutup
            document.addEventListener('keydown', (e)=>{ if(e.key === 'Escape') closeSidebar(); });
        });
    </script>
</body>
</html>
