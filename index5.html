<!DOCTYPE html>
<html lang="id" data-theme="pastel">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
    <title>Ungkapan Bahasa Jepang ‚Äî Latihan</title>
    <meta name="description" content="Daftar ungkapan dan frasa umum dalam bahasa Jepang untuk percakapan sehari-hari. Lengkap dengan arti dan audio pelafalan." />
    <meta name="theme-color" content="#7a6cff">

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Noto+Sans+JP:wght@400;700&family=Noto+Serif+JP:wght@700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css">
    <style>
        /* Menggunakan style yang sama dari file lain untuk konsistensi */
        :root{
            --bg:#f8fbff; --panel:#ffffff; --soft:#f2f6ff; --ink:#132030; --muted:#76849c;
            --pri:#7a6cff; --sec:#16c6a1; --warn:#ff7b7b; --ok:#2fb875; --accent:#ffd166;
            --btn:#e9eefc; --btnText:#0b101a; --border:rgba(19,32,48,.10);
            --radius:18px; --shadow:0 6px 18px rgba(15,23,34,.08);
            --ring: 0 0 0 3px rgba(122,108,255,.28);
            --iconColor: var(--muted);
            --transition-duration: 0.2s;
        }
        [data-theme="hc"]{
            --bg:#0a0f1a; --panel:#0f1626; --soft:#0c1220; --ink:#e6efff; --muted:#9fb0cc;
            --pri:#8fa8ff; --sec:#3dd8b5; --warn:#ff8c8c; --ok:#7be0b3; --accent:#ffd98a;
            --btn:#18243a;
            --btnText:#e6efff;
            --border:rgba(230,239,255,.12);
            --ring: 0 0 0 3px rgba(143,168,255,.35);
            --iconColor: var(--ink);
        }
        *{box-sizing:border-box}
        html, body { max-width: 100%; overflow-x: hidden; }
        body {
            min-height: 100svh;
            margin:0;font-family:'Inter', system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;background:
            radial-gradient(900px 420px at -10% -20%, rgba(122,108,255,.10), transparent),
            radial-gradient(900px 420px at 110% -30%, rgba(22,198,161,.12), transparent),
            var(--bg);color:var(--ink);
            transition: background-color var(--transition-duration) ease-out, color var(--transition-duration) ease-out;
        }
        .wrap{
            max-width: 960px;
            margin: auto;
            padding: 16px;
            padding-left: calc(16px + env(safe-area-inset-left));
            padding-right: calc(16px + env(safe-area-inset-right));
        }
        header{position:sticky;top:0;z-index:30;background:linear-gradient(180deg, rgba(255,255,255,.92), rgba(255,255,255,.72));backdrop-filter: blur(8px);border-bottom:1px solid var(--border); padding-top:env(safe-area-inset-top);
        transition: background var(--transition-duration) ease-out, backdrop-filter var(--transition-duration) ease-out, border-bottom-color var(--transition-duration) ease-out;}
        [data-theme="hc"] header{background:linear-gradient(180deg, rgba(15,22,38,.86), rgba(15,22,38,.66))}
        
        .brand{ display:flex; align-items:center; gap:12px; justify-content: space-between; flex-wrap: wrap; }
        .logo{width:36px;height:36px;border-radius:12px;background:linear-gradient(135deg,var(--pri),var(--sec));box-shadow:var(--shadow);
        transition: box-shadow var(--transition-duration) ease-out, background var(--transition-duration) ease-out;}
        h1{font-size:20px;margin:0}
        .small{font-size:12px;color:var(--muted)}
        .card{background:var(--panel);border-radius:var(--radius);box-shadow:var(--shadow);padding:16px;border:1px solid var(--border);
        transition: background-color var(--transition-duration) ease-out, border-color var(--transition-duration) ease-out, box-shadow var(--transition-duration) ease-out;}
        .card h2{font-size:16px;margin:0 0 10px 0; display: flex; align-items: center; gap: 8px;}
        .card h2 .icon { color: var(--iconColor); transition: color var(--transition-duration) ease-out;}
        .row{display:flex;gap:8px;flex-wrap:wrap;align-items:center}
        .btn{ min-height:52px; padding: 0 16px; border-radius: 12px; border: none; cursor: pointer; font-size: 14px; font-weight: 500; transition: all var(--transition-duration) ease-out; color: var(--ink); background: var(--btn); display: flex; align-items: center; justify-content: center; gap: 8px; text-decoration: none; }
        .btn:active{transform:translateY(1px)}
        .btn.primary{ background:linear-gradient(135deg, var(--pri), var(--sec)); color:white; }
        .btn.ghost{background:transparent;outline:1px solid var(--border); color: var(--ink);}
        .btn:focus-visible{outline:none; box-shadow:var(--ring); outline-offset: 3px;}
        .spacer{height:16px}
        /* Hilangkan nav lama (kalau ada) */
        .main-nav{ display:none !important; }
        @media (min-width: 768px) { .main-nav .btn { flex-grow: 0; } }

        /* Style khusus untuk Daftar Ungkapan */
        .phrase-list {
            list-style: none;
            padding: 0;
            margin: 0;
        }
        .phrase-item {
            display: flex;
            flex-direction: column; /* Ubah menjadi kolom agar AI contoh ada di bawah */
            padding: 16px 8px;
            border-bottom: 1px solid var(--border);
            transition: background-color var(--transition-duration) ease-out;
        }
        .phrase-item:hover {
            background-color: var(--soft);
        }
        .phrase-item:last-child {
            border-bottom: none;
        }
        .phrase-main-info {
            display: flex;
            justify-content: space-between;
            align-items: center;
            width: 100%;
            cursor: pointer; /* Agar bisa diklik untuk play audio */
        }
        .phrase-jp {
            font-family: 'Noto Sans JP', sans-serif;
            font-size: 22px;
            font-weight: 500;
        }
        .phrase-id {
            text-align: right;
            font-size: 16px;
        }
        .phrase-actions {
            display: flex;
            gap: 8px; /* Jarak antar tombol */
            margin-left: 16px; /* Jarak dari phrase-id */
            flex-shrink: 0;
        }
        .phrase-actions .btn-small {
            min-height: 36px;
            padding: 0 10px;
            font-size: 13px;
            border-radius: 8px;
            background: var(--soft);
            color: var(--muted);
            border: 1px solid var(--border);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 4px;
        }
        .phrase-actions .btn-small:hover {
            background: var(--btn);
            color: var(--ink);
        }
        .phrase-ai-examples {
            margin-top: 12px;
            padding: 12px;
            background: var(--soft);
            border-radius: 8px;
            border: 1px solid var(--border);
            font-size: 14px;
            line-height: 1.5;
            display: none; /* Default hidden */
            opacity: 0;
            max-height: 0;
            overflow: hidden;
            transition: opacity var(--transition-duration) ease-out, max-height var(--transition-duration) ease-out;
        }
        .phrase-ai-examples.show {
            display: block; /* Tampilkan block saat show */
            opacity: 1;
            max-height: 500px; /* Nilai max-height yang cukup besar untuk transisi */
        }
        .phrase-ai-examples p {
            margin: 0 0 8px 0;
        }
        .phrase-ai-examples p:last-child {
            margin-bottom: 0;
        }
        .phrase-ai-examples .loading-spinner {
            display: flex;
            align-items: center;
            gap: 8px;
            color: var(--muted);
            justify-content: center;
        }
        .phrase-ai-examples .loading-spinner .fa-spinner {
            animation: spin 1s linear infinite;
        }
        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        /* === Sidebar === */
        .sidebar{
            position:fixed; top:0; left:-300px; width:280px; height:100%;
            background:var(--panel); box-shadow:var(--shadow); z-index:1000;
            transition:left .3s ease-in-out; padding:20px; padding-top:calc(20px + env(safe-area-inset-top));
            display:flex; flex-direction:column; gap:10px; overflow-y:auto; border-right:1px solid var(--border);
        }
        .sidebar.is-open{ left:0; }
        .sidebar .menu{ list-style:none; margin:0; padding:0; }
        .sidebar .menu li a{ display:flex; gap:.5rem; align-items:center; padding:.75rem 1rem; border-radius:12px; color:var(--ink); text-decoration:none; }
        .sidebar .menu li a:hover{ background:var(--soft); }
        .sidebar .menu li a.active{ background:rgba(122,108,255,.12); font-weight:600; }
        .sidebar-toggle-btn{
            position:fixed; top:16px; left:16px; z-index:1001; background:var(--btn); border:1px solid var(--border);
            border-radius:50%; width:44px; height:44px; display:flex; align-items:center; justify-content:center; cursor:pointer; box-shadow:var(--shadow);
        }
        .sidebar-toggle-btn i{ color:var(--ink); font-size:20px; }
        @media (min-width:768px){ body.sidebar-open{ padding-left:280px; } }
        @media (max-width:640px){ .sidebar{ width:84vw; max-width:320px; } }
        /* Biar header gak ketutup tombol */
        header .brand{ position:relative; z-index:1002; padding-left:60px; }
        @media (max-width:767px){
            header .brand{ padding-left:0; }
            .sidebar-toggle-btn{ top:calc(16px + env(safe-area-inset-top)); }
        }
    </style>
</head>
<body>
    <!-- Tombol untuk membuka/menutup sidebar -->
    <button id="sidebarToggle" class="sidebar-toggle-btn" aria-label="Toggle Sidebar">
      <i class="fa-solid fa-bars"></i>
    </button>

    <!-- Sidebar navigasi -->
    <nav id="sidebar" class="sidebar">
      <div class="row" style="justify-content: space-between; align-items: center;">
        <h3 style="margin:0;">Navigasi</h3>
        <button class="btn ghost" id="closeSidebar" aria-label="Tutup Sidebar">
          <i class="fa-solid fa-times"></i>
        </button>
      </div>
      <hr style="border:none;border-top:1px solid var(--border);width:100%;">
      <ul class="menu">
        <li><a href="index.html">üìò Latihan</a></li>
        <li><a href="index2.html">üóÇÔ∏è Flashcard</a></li>
        <li><a href="index3.html">üßÆ Tabel Kana</a></li>
        <li><a href="index4.html">üóíÔ∏è Kosakata</a></li>
        <li><a href="index5.html" class="active">üí¨ Ungkapan</a></li>
        <li><a href="index7.html">üß† Tebak Arti</a></li>
        <li><a href="index6.html">‚úçÔ∏è Menulis</a></li>
        <li><a href="index8.html">üìö Pelatih Membaca</a></li> <!-- Menambahkan link ke index8.html -->
      </ul>
    </nav>

    <header>
        <div class="wrap">
            <div class="brand">
                <svg class="logo" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 64 64" width="36" height="36">
                    <defs>
                        <linearGradient id="g" x1="0" y1="0" x2="1" y2="1">
                            <stop stop-color="#7a6cff"/><stop offset="1" stop-color="#16c6a1"/>
                        </linearGradient>
                    </defs>
                    <rect width="64" height="64" rx="14" fill="url(#g)"/>
                    <text x="50%" y="50%" text-anchor="middle" dominant-baseline="middle"
                          font-family="Noto Sans JP, 'Noto Serif JP', system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif"
                          font-size="38" fill="white" dy="-2">„ÅÇ</text>
                </svg>
                <div>
                    <h1>Pelatih Kana Jepang</h1>
                    <div class="small">Ungkapan Sehari-hari</div>
                </div>
            </div>
        </div>
    </header>

    <main class="wrap">
        <div class="card">
            <h2><i class="fa-solid fa-comments icon"></i> Ungkapan (Ë°®Áèæ)</h2>
            <div class="small">Daftar ungkapan umum yang berguna dalam percakapan sehari-hari. Klik pada ungkapan untuk mendengarkan. Klik "Contoh AI" untuk melihat penggunaan dalam kalimat.</div>
        </div>

        <div class="spacer"></div>

        <!-- Penambahan: CTA card "Tebak Arti" -->
        <div class="card" id="cta-tebak-arti">
          <h2><i class="fa-solid fa-brain icon"></i> Tebak Arti (JP‚ÜíID)</h2>
          <div class="small">Kuis arti Jepang ‚Üí Indonesia (A‚ÄìD). Pilih kategori & jumlah soal.</div>
          <div class="spacer"></div>
          <div class="row" style="gap:8px;flex-wrap:wrap">
            <a class="btn primary" href="index7.html"><i class="fa-solid fa-play"></i> Mulai Tebak Arti</a>
            <a class="btn ghost" href="index7.html#kategori"><i class="fa-solid fa-list"></i> Pilih Kategori</a>
          </div>
        </div>

        <div class="spacer"></div>

        <div class="card">
            <ul id="phraseList" class="phrase-list">
                <!-- Daftar ungkapan akan digenerate oleh JavaScript -->
            </ul>
        </div>
    </main>

    <script>
        // DATA UNGKAPAN
        // Menghapus duplikasi dan memastikan setiap frase unik
        const uniquePhrases = new Map();
        [
            { jp: '„Åä„ÅØ„Çà„ÅÜ„Åî„Åñ„ÅÑ„Åæ„Åô', id: 'Selamat pagi' },
            { jp: '„Åì„Çì„Å´„Å°„ÅØ', id: 'Selamat siang / Halo' },
            { jp: '„Åì„Çì„Å∞„Çì„ÅØ', id: 'Selamat malam' },
            { jp: '„Åä„ÇÑ„Åô„Åø„Å™„Åï„ÅÑ', id: 'Selamat tidur / Selamat malam (perpisahan)' },
            { jp: '„Åï„Çà„ÅÜ„Å™„Çâ', id: 'Selamat tinggal' },
            { jp: '„ÅÇ„Çä„Åå„Å®„ÅÜ', id: 'Terima kasih' },
            { jp: '„Å©„ÅÜ„ÅÑ„Åü„Åó„Åæ„Åó„Å¶', id: 'Sama-sama / Terima kasih kembali' },
            { jp: '„Åô„Åø„Åæ„Åõ„Çì', id: 'Maaf / Permisi' },
            { jp: '„Åî„ÇÅ„Çì„Å™„Åï„ÅÑ', id: 'Mohon maaf' },
            { jp: '„ÅØ„Åò„ÇÅ„Åæ„Åó„Å¶', id: 'Perkenalkan (saat pertama bertemu)' },
            { jp: '„Å©„ÅÜ„Åû„Çà„Çç„Åó„Åè„Åä„Å≠„Åå„ÅÑ„Åó„Åæ„Åô', id: 'Senang berkenalan dengan Anda' },
            { jp: '„Åä„Åí„Çì„Åç„Åß„Åô„Åã', id: 'Apa kabar?' },
            { jp: '„ÅØ„ÅÑ„ÄÅ„Åí„Çì„Åç„Åß„Åô', id: 'Ya, saya baik-baik saja' },
            { jp: '„ÅÑ„Åü„Å†„Åç„Åæ„Åô', id: 'Selamat makan (sebelum makan)' },
            { jp: '„Åî„Å°„Åù„ÅÜ„Åï„Åæ„Åß„Åó„Åü', id: 'Terima kasih atas makanannya (setelah makan)' },
            { jp: '„ÅÑ„Å£„Å¶„Åç„Åæ„Åô', id: 'Saya berangkat' },
            { jp: '„ÅÑ„Å£„Å¶„Çâ„Åó„ÇÉ„ÅÑ', id: 'Selamat jalan' },
            { jp: '„Åü„Å†„ÅÑ„Åæ', id: 'Saya pulang' },
            { jp: '„Åä„Åã„Åà„Çä„Å™„Åï„ÅÑ', id: 'Selamat datang kembali' },
            { jp: '„Åä„Å§„Åã„Çå„Åï„Åæ„Åß„Åô', id: 'Terima kasih atas kerja kerasnya (ungkapan apresiasi)' },
            { jp: '„Åå„Çì„Å∞„Å£„Å¶„Åè„Å†„Åï„ÅÑ', id: 'Semangat!' },
            { jp: '„Åå„Çì„Å∞„Çä„Åæ„Åô', id: 'Saya akan berusaha!' },
            { jp: '„Åä„ÇÅ„Åß„Å®„ÅÜ„Åî„Åñ„ÅÑ„Åæ„Åô', id: 'Selamat (atas keberhasilan/perayaan)' },
            { jp: '„ÇÇ„ÅÜ„ÅÑ„Å°„Å©', id: 'Sekali lagi' },
            { jp: '„Çè„Åã„Çä„Åæ„Åó„Åü', id: 'Saya mengerti / Paham' },
            { jp: '„Çè„Åã„Çä„Åæ„Åõ„Çì', id: 'Saya tidak mengerti' },
            { jp: '„Å†„ÅÑ„Åò„Çá„ÅÜ„Å∂„Åß„Åô', id: 'Tidak apa-apa / Baik-baik saja' },
            { jp: '„Åî„ÇÅ„ÅÑ„Çè„Åè„Çí„Åä„Åã„Åë„Åó„Åæ„Åô', id: 'Maaf merepotkan Anda' },
            { jp: '„Åä„Å≠„Åå„ÅÑ„Åó„Åæ„Åô', id: 'Mohon / Tolong' },
            { jp: '„Åó„Å§„Çå„ÅÑ„Åó„Åæ„Åô', id: 'Permisi (saat masuk/keluar ruangan, atau mengganggu)' },
            { jp: '„Åä„Åï„Åç„Å´„Åó„Å§„Çå„ÅÑ„Åó„Åæ„Åô', id: 'Permisi, saya pulang duluan' },
            { jp: '„Åä„Å™„Åæ„Åà„ÅØ„Å™„Çì„Åß„Åô„Åã', id: 'Siapa nama Anda?' },
            { jp: '„Çè„Åü„Åó„ÅØ[nama]„Åß„Åô', id: 'Nama saya [nama]' },
            { jp: '„Å©„Åì„Åã„Çâ„Åç„Åæ„Åó„Åü„Åã', id: 'Anda berasal dari mana?' },
            { jp: '„Çè„Åü„Åó„ÅØ„Ç§„É≥„Éâ„Éç„Ç∑„Ç¢„Åã„Çâ„Åç„Åæ„Åó„Åü', id: 'Saya berasal dari Indonesia' },
            { jp: '„Åä„ÅÑ„Åè„Å§„Åß„Åô„Åã', id: 'Berapa umur Anda?' },
            { jp: '„Åì„Çå„ÅØ„Å™„Çì„Åß„Åô„Åã', id: 'Ini apa?' },
            { jp: '„ÅÇ„Çå„ÅØ„Å™„Çì„Åß„Åô„Åã', id: 'Itu apa?' },
            { jp: '„ÅÑ„Åè„Çâ„Åß„Åô„Åã', id: 'Berapa harganya?' },
            { jp: '„Åì„Çå„Çí„Åè„Å†„Åï„ÅÑ', id: 'Tolong berikan ini' },
            { jp: '„Åä„ÅÑ„Åó„ÅÑ„Åß„Åô', id: 'Enak (makanan)' },
            { jp: '„Åæ„Åö„ÅÑ„Åß„Åô', id: 'Tidak enak (makanan)' },
            { jp: '„Åç„Çå„ÅÑ„Åß„Åô„Å≠', id: 'Cantik/Bersih ya' },
            { jp: '„Åô„Åî„ÅÑ„Åß„Åô„Å≠', id: 'Hebat ya' },
            { jp: '„Åü„ÅÆ„Åó„ÅÑ„Åß„Åô', id: 'Menyenangkan' },
            { jp: '„Åï„Å≥„Åó„ÅÑ„Åß„Åô', id: 'Kesepian' },
            { jp: '„Å§„Åã„Çå„Åæ„Åó„Åü', id: 'Saya lelah' },
            { jp: '„Å≠„ÇÄ„ÅÑ„Åß„Åô', id: 'Saya mengantuk' },
            { jp: '„Åä„Å™„Åã„Åå„Åô„Åç„Åæ„Åó„Åü', id: 'Saya lapar' },
            { jp: '–Ω–æ–¥–æ„Åå„Åã„Çè„Åç„Åæ„Åó„Åü', id: 'Saya haus' },
            { jp: '„Åæ„Åü„ÅÇ„Åó„Åü', id: 'Sampai jumpa besok' },
            { jp: '„Åæ„Åü„Åì„Çì„Å©', id: 'Sampai jumpa lain kali' },
            { jp: '„Åä„Å†„ÅÑ„Åò„Å´', id: 'Semoga cepat sembuh' },
            { jp: '„Åç„Çí„Å§„Åë„Å¶', id: 'Hati-hati' },
            { jp: '„Åä„Å§„Åã„Çå„Åï„Åæ„Åß„Åó„Åü', id: 'Terima kasih atas kerja kerasnya (setelah bekerja)' },
            { jp: '„Å©„ÅÜ„ÇÇ„ÅÇ„Çä„Åå„Å®„ÅÜ„Åî„Åñ„ÅÑ„Åæ„Åô', id: 'Terima kasih banyak' },
            { jp: '„Åì„Å°„Çâ„Åì„Åù', id: 'Sama-sama / Dengan senang hati' },
            { jp: '„Çà„Çç„Åó„Åè„Åä„Å≠„Åå„ÅÑ„Åó„Åæ„Åô', id: 'Mohon bantuannya / Senang bekerja sama' },
            { jp: '„Åî„ÇÜ„Å£„Åè„Çä„Å©„ÅÜ„Åû', id: 'Silakan nikmati waktu Anda / Jangan terburu-buru' },
            { jp: '„Åä„Åæ„Åü„Åõ„Åó„Åæ„Åó„Åü', id: 'Maaf membuat Anda menunggu' },
            { jp: '„Åä„Åò„ÇÉ„Åæ„Åó„Åæ„Åô', id: 'Permisi (saat masuk ke rumah orang lain)' },
            { jp: '„ÅÑ„Çâ„Å£„Åó„ÇÉ„ÅÑ„Åæ„Åõ', id: 'Selamat datang (di toko/restoran)' },
            { jp: '„Åã„Åó„Åì„Åæ„Çä„Åæ„Åó„Åü', id: 'Baik, saya mengerti (formal)' },
            { jp: '„Åó„Çá„ÅÜ„Åó„Çá„ÅÜ„Åä„Åæ„Å°„Åè„Å†„Åï„ÅÑ', id: 'Mohon tunggu sebentar' },
            { jp: '„ÇÇ„ÅÜ„Åó„Çè„Åë„ÅÇ„Çä„Åæ„Åõ„Çì', id: 'Mohon maaf (sangat formal)' },
            { jp: '„Åî„Å°„ÇÖ„ÅÜ„ÇÇ„Çì„ÅØ„Åä„Åç„Åæ„Çä„Åß„Åô„Åã', id: 'Sudah siap memesan?' },
            { jp: '„Å™„Å´„Å´„Å™„Åï„ÅÑ„Åæ„Åô„Åã', id: 'Anda ingin minum apa?' },
            { jp: '„Åä„Åã„ÅÑ„Åë„ÅÑ„Åä„Å≠„Åå„ÅÑ„Åó„Åæ„Åô', id: 'Minta tagihannya' },
            { jp: '„Åæ„Åü„ÅÆ„Åî„Çä„Çà„ÅÜ„Çí„Åä„Åæ„Å°„Åó„Å¶„Åä„Çä„Åæ„Åô', id: 'Kami menantikan kunjungan Anda berikutnya' },
            { jp: '„Å©„ÅÜ„Åó„Åæ„Åó„Åü„Åã', id: 'Ada apa? / Apa yang terjadi?' },
            { jp: '„Åü„Åô„Åë„Å¶„Åè„Å†„Åï„ÅÑ', id: 'Tolong saya!' },
            { jp: '„ÇÜ„Å£„Åè„Çä„ÅØ„Å™„Åó„Å¶„Åè„Å†„Åï„ÅÑ', id: 'Tolong bicara pelan-pelan' },
            { jp: '„ÇÇ„ÅÜ„Åô„Åì„Åó„ÇÜ„Å£„Åè„Çä„Åä„Å≠„Åå„ÅÑ„Åó„Åæ„Åô', id: 'Tolong sedikit lebih pelan' },
            { jp: '„Åì„Çå„Çè„Åã„Çä„Åæ„Åô„Åã', id: 'Apakah Anda mengerti ini?' },
            { jp: '„ÅØ„ÅÑ„ÄÅ„Çè„Åã„Çä„Åæ„Åô', id: 'Ya, saya mengerti' },
            { jp: '„ÅÑ„ÅÑ„Åà„ÄÅ„Çè„Åã„Çä„Åæ„Åõ„Çì', id: 'Tidak, saya tidak mengerti' },
            { jp: '„Åä„Åí„Çì„Åç„Åß', id: 'Jaga diri baik-baik' },
            { jp: '„Åä„Å§„Åã„Çå„Åï„Åæ', id: 'Kerja bagus / Terima kasih (bentuk kasual dari otsukaresama desu)' },
            { jp: '„Åå„Çì„Å∞„Å£„Å¶„Å≠', id: 'Semangat ya (kasual)' },
            { jp: '„Åó„ÇÖ„ÅÜ„Åæ„Å§„ÅØ„Å™„Å´„Çí„Åó„Åæ„Åó„Åü„Åã', id: 'Apa yang Anda lakukan akhir pekan?' },
            { jp: '„Åà„ÅÑ„Åî„Åå„ÅØ„Å™„Åõ„Åæ„Åô„Åã', id: 'Apakah Anda bisa bicara bahasa Inggris?' },
            { jp: '„ÅØ„ÅÑ„ÄÅ„Åô„Åì„Åó„ÅØ„Å™„Åõ„Åæ„Åô', id: 'Ya, saya bisa bicara sedikit' },
            { jp: '„ÅÑ„ÅÑ„Åà„ÄÅ„ÅØ„Å™„Åõ„Åæ„Åõ„Çì', id: 'Tidak, saya tidak bisa bicara' },
            { jp: '„Å©„Åì„Å´„ÅÑ„Åç„Åü„ÅÑ„Åß„Åô„Åã', id: 'Anda mau pergi ke mana?' },
            { jp: '„Éà„Ç§„É¨„ÅØ„Å©„Åì„Åß„Åô„Åã', id: 'Di mana toiletnya?' },
            { jp: '„Åø„Åé„Å∏„Åæ„Åå„Çä„Åæ„Åô', id: 'Belok kanan' },
            { jp: '„Å≤„Å†„Çä„Å∏„Åæ„Åã„Çô„Çä„Åæ„Åô', id: 'Belok kiri' },
            { jp: '„Åæ„Å£„Åô„Åê„ÅÑ„Å£„Å¶„Åè„Å†„Åï„ÅÑ', id: 'Lurus saja' },
            { jp: '„Åì„Çå„ÅØ„ÅÇ„Å§„ÅÑ„Åß„Åô„Åã„Åï„ÇÄ„ÅÑ„Åß„Åô„Åã', id: 'Ini panas atau dingin?' },
            { jp: '„ÅÇ„Å§„ÅÑ„Åß„Åô', id: 'Panas' },
            { jp: '„Åï„ÇÄ„ÅÑ„Åß„Åô', id: 'Dingin' },
            { jp: '„Åä„Å™„Åæ„Åà„Çí„ÇÇ„ÅÜ„ÅÑ„Å°„Å©„Åä„Å≠„Åå„ÅÑ„Åó„Åæ„Åô', id: 'Tolong nama Anda sekali lagi' },
            { jp: '„Åä„ÅÇ„ÅÑ„Åß„Åç„Å¶„ÅÜ„Çå„Åó„ÅÑ„Åß„Åô', id: 'Senang bertemu Anda' },
            { jp: '„Åä„Å¶„Å§„Å†„ÅÑ„Åó„Åæ„Åó„Çá„ÅÜ„Åã', id: 'Ada yang bisa saya bantu?' },
            { jp: '„ÅÇ„Çä„Åå„Å®„ÅÜ„Åî„Åñ„ÅÑ„Åæ„Åô„ÄÅ„Åü„Åô„Åã„Çä„Åæ„Åô', id: 'Terima kasih, sangat membantu' },
            { jp: '„ÅÑ„ÅÑ„Åà„ÄÅ„Åë„Å£„Åì„ÅÜ„Åß„Åô', id: 'Tidak, terima kasih (menolak dengan sopan)' },
            { jp: '„Åî„Å°„ÇÖ„ÅÜ„ÅÑ„Åè„Å†„Åï„ÅÑ', id: 'Hati-hati / Mohon diperhatikan' },
            { jp: '„Åî„ÇÅ„Çì„Åè„Å†„Åï„ÅÑ', id: 'Permisi (saat mengetuk pintu atau memanggil seseorang)' },
            { jp: '„Å©„ÅÜ„Åû', id: 'Silakan / Ini dia' },
            { jp: '„ÇÇ„Å°„Çç„Çì„Åß„Åô', id: 'Tentu saja' },
            { jp: '„Åñ„Çì„Å≠„Çì„Åß„Åô„Åå', id: 'Sayangnya, ...' },
            { jp: '„Åä„Åï„Åë„ÅØ„ÅÆ„ÇÅ„Åæ„Åô„Åã', id: 'Apakah Anda minum alkohol?' },
            { jp: '„ÅØ„ÅÑ„ÄÅ„ÅÆ„ÇÅ„Åæ„Åô', id: 'Ya, saya minum' },
            { jp: '„ÅÑ„ÅÑ„Åà„ÄÅ„ÅÆ„ÇÅ„Åæ„Åõ„Çì', id: 'Tidak, saya tidak minum' },
            { jp: '„Çø„Éê„Ç≥„Çí„Åô„ÅÑ„Åæ„Åô„Åã', id: 'Apakah Anda merokok?' },
            { jp: '„ÅØ„ÅÑ„ÄÅ„Åô„ÅÑ„Åæ„Åô', id: 'Ya, saya merokok' },
            { jp: '„ÅÑ„ÅÑ„Åà„ÄÅ„Åô„ÅÑ„Åæ„Åõ„Çì', id: 'Tidak, saya tidak merokok' },
            { jp: '„Åä„Å≤„Åï„Åó„Å∂„Çä„Åß„Åô', id: 'Lama tidak bertemu' },
            { jp: '„Åä„Åí„Çì„Åç„Åß„Åó„Åü„Åã', id: 'Apa kabar (setelah lama tidak bertemu)?' },
            { jp: '„Åä„Åã„Åí„Åï„Åæ„Åß', id: 'Berkat Anda / Puji syukur' },
            { jp: '„Å™„Çì„Åß„ÇÇ„Å™„ÅÑ„Åß„Åô', id: 'Tidak apa-apa' },
            { jp: '„Åå„Å£„Åã„Çä„Åó„Åæ„Åó„Åü', id: 'Saya kecewa' },
            { jp: '„ÅÜ„Çå„Åó„ÅÑ„Åß„Åô', id: 'Saya senang' },
            { jp: '„Åã„Å™„Åó„ÅÑ„Åß„Åô', id: 'Saya sedih' },
            { jp: '„Åì„Çè„ÅÑ„Åß„Åô', id: 'Saya takut' },
            { jp: '„Åü„ÅÆ„Åó„Åø„Åß„Åô', id: 'Saya menantikannya' },
            { jp: '„Åó„Çì„Å±„ÅÑ„Åß„Åô', id: 'Saya khawatir' },
            // Ungkapan tambahan yang sering dipakai sehari-hari (diperiksa dan duplikasi dihapus)
            { jp: '„ÅÑ„Å£„Å¶„Çâ„Å£„Åó„ÇÉ„ÅÑ', id: 'Hati-hati di jalan' },
            { jp: '„Åä„Åã„Åà„Çä', id: 'Selamat datang kembali (kasual)' },
            { jp: '„Åä„Åó„Åà„Å¶„Åè„Å†„Åï„ÅÑ', id: 'Tolong ajari saya' },
            { jp: '„Åæ„Åü„Å≠', id: 'Sampai jumpa lagi (kasual)' },
            { jp: '„ÅÑ„ÅÑ„Åà', id: 'Tidak' },
            { jp: '„ÇÇ„ÅÜ„ÅÑ„Å°„Å©„Åä„Å≠„Åå„ÅÑ„Åó„Åæ„Åô', id: 'Tolong sekali lagi' },
            { jp: '„ÇÜ„Å£„Åè„Çä„Åä„Å≠„Åå„ÅÑ„Åó„Åæ„Åô', id: 'Tolong perlahan-lahan' },
            { jp: '„ÇÇ„Å°„Çç„Çì', id: 'Tentu saja' },
            { jp: '„Åä„Å™„Åæ„Åà„ÅØÔºü', id: 'Siapa nama Anda?' },
            { jp: '„Çè„Åü„Åó„ÅØ [nama] „Åß„Åô', id: 'Nama saya [nama]' },
            { jp: '„ÅÑ„Åè„Çâ„Åß„Åô„ÅãÔºü', id: 'Berapa harganya?' },
            { jp: '„Åä„ÅÑ„Åó„ÅÑ', id: 'Enak (kasual)' },
            { jp: '„Åü„ÅÆ„Åó„ÅÑ', id: 'Menyenangkan (kasual)' },
            { jp: '„Åï„ÇÄ„ÅÑ', id: 'Dingin (kasual)' },
            { jp: '„ÅÇ„Å§„ÅÑ', id: 'Panas (kasual)' },
            { jp: '„Åå„Çì„Å∞„Å£„Å¶', id: 'Semangat (kasual)' },
            { jp: '„Åä„ÇÅ„Åß„Å®„ÅÜ', id: 'Selamat (kasual)' },
            { jp: '„Çà„Åã„Å£„Åü', id: 'Syukurlah / Bagus!' },
            { jp: '„Å†„ÇÅ„Åß„Åô', id: 'Tidak boleh / Salah' },
            { jp: '„Åô„Åç„Åß„Åô', id: 'Saya suka' },
            { jp: '„Åç„Çâ„ÅÑ„Åß„Åô', id: 'Saya tidak suka' },
            { jp: '„Åª„Çì„Å®„ÅÜ„Å´Ôºü', id: 'Benarkah?' },
            { jp: '„ÅÜ„ÅùÔºÅ', id: 'Bohong! / Tidak mungkin!' },
            { jp: '„Å°„Çá„Å£„Å®„Åæ„Å£„Å¶„Åè„Å†„Åï„ÅÑ', id: 'Tolong tunggu sebentar' },
            { jp: '„ÇÇ„ÅÜ„Åô„Åì„Åó', id: 'Sedikit lagi' },
            { jp: '„Åì„Çå„Åß„ÅÑ„ÅÑ„Åß„Åô„Åã', id: 'Apakah ini sudah cukup / benar?' },
            { jp: '„ÅØ„ÅÑ„ÄÅ„ÅÑ„ÅÑ„Åß„Åô', id: 'Ya, sudah cukup / benar' },
            { jp: '„ÅÑ„ÅÑ„Åà„ÄÅ„Å†„ÇÅ„Åß„Åô', id: 'Tidak, tidak boleh / salah' },
            { jp: '„Åä„Å≠„Åå„ÅÑ', id: 'Tolong (kasual)' },
            { jp: '„Åî„ÇÅ„Çì', id: 'Maaf (kasual)' },
            { jp: '„Å©„ÅÜ„ÇÇ', id: 'Terima kasih (sangat kasual)' },
            { jp: '„Åò„ÇÉ„ÅÇ„Å≠', id: 'Dah (kasual)' },
            { jp: '„Éê„Ç§„Éê„Ç§', id: 'Bye-bye' },
            { jp: '„Åä„Å§„Åã„Çå', id: 'Kerja bagus (kasual, ke teman/rekan)' },
            { jp: '„Åå„Çì„Å∞„Çã„Å≠', id: 'Aku akan berusaha (kasual)' },
            { jp: '„Çà„Çç„Åó„Åè', id: 'Mohon bantuannya (kasual)' },
            { jp: '„Å©„ÅÜ„Åû„Çà„Çç„Åó„Åè', id: 'Senang berkenalan (kasual)' },
            { jp: '„ÅÑ„Åã„Åå„Åß„Åô„Åã', id: 'Bagaimana?' },
            { jp: '„Åí„Çì„ÅçÔºü', id: 'Apa kabar? (kasual)' },
            { jp: '„ÅÜ„Çì„ÄÅ„Åí„Çì„Åç', id: 'Ya, baik (kasual)' },
            { jp: '„Å°„Çá„Å£„Å®', id: 'Sebentar / Agak...' },
            { jp: '„Åú„Çì„Åú„Çì', id: 'Sama sekali tidak' },
            { jp: '„Åæ„Åï„ÅãÔºÅ', id: 'Tidak mungkin! / Jangan-jangan!' },
            { jp: '„Åô„Åî„ÅÑÔºÅ', id: 'Hebat! / Keren!' },
            { jp: '„Å™„Çã„Åª„Å©', id: 'Begitu ya / Saya mengerti' },
            { jp: '„Åó„Çâ„Å™„ÅÑ', id: 'Saya tidak tahu' },
            { jp: '„ÇÑ„ÇÅ„Å¶„Åè„Å†„Åï„ÅÑ', id: 'Tolong hentikan' },
            { jp: '„ÇÑ„ÇÅ„ÇçÔºÅ', id: 'Hentikan! (kasar)' },
            { jp: '„ÅÑ„ÅÑ„Çà', id: 'Baiklah / Tidak apa-apa (kasual)' },
            { jp: '„Å†„ÇÅ„Å†', id: 'Tidak boleh (kasual)' },
            { jp: '„Åó„Çì„Åò„Å¶', id: 'Percayalah' },
            { jp: '„ÅÜ„Åù„Å§„ÅçÔºÅ', id: 'Pembohong!' },
            { jp: '„Åå„Çì„Å∞„Çç„ÅÜÔºÅ', id: 'Ayo semangat!' },
            { jp: '„Åå„Çì„Å∞„Çä„Åæ„ÅôÔºÅ', id: 'Saya akan berusaha!' },
            { jp: '„Çà„Åã„Å£„Åü„Å≠', id: 'Syukurlah ya / Bagus ya' },
        ].forEach(phrase => uniquePhrases.set(phrase.jp, phrase));

        const phrases = Array.from(uniquePhrases.values());

        // Elemen DOM
        const phraseList = document.getElementById('phraseList');

        // --- INTEGRASI API GEMINI ---
        // Menggunakan API Key yang Anda berikan
        const GEMINI_API_KEY = "AIzaSyCZVyGLZrlJW-bQFSYfIgVgWhVWQ6icaeE"; 
        const GEMINI_API_URL = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:generateContent?key=${GEMINI_API_KEY}`;

        // Cache untuk menyimpan hasil Gemini agar tidak perlu memanggil API berulang
        const geminiCache = new Map();

        // Fungsi untuk menangani percobaan ulang dengan exponential backoff
        async function fetchWithExponentialBackoff(url, options, retries = 3, delay = 1000) {
            for (let i = 0; i < retries; i++) {
                try {
                    const response = await fetch(url, options);
                    if (response.status === 429 && i < retries - 1) { // Too Many Requests
                        await new Promise(resolve => setTimeout(resolve, delay));
                        delay *= 2; // Gandakan delay
                        continue;
                    }
                    return response;
                } catch (error) {
                    if (i < retries - 1) {
                        await new Promise(resolve => setTimeout(resolve, delay));
                        delay *= 2;
                        continue;
                    }
                    throw error;
                }
            }
            throw new Error('Gagal melakukan fetch setelah beberapa percobaan.');
        }

        async function fetchAIExamples(phraseItemEl, jpPhrase) {
            const aiExamplesDiv = phraseItemEl.querySelector('.phrase-ai-examples');
            const toggleButton = phraseItemEl.querySelector('.btn-toggle-ai-examples');

            // Toggle visibility
            const isShowing = aiExamplesDiv.classList.contains('show');
            if (isShowing) {
                aiExamplesDiv.classList.remove('show');
                toggleButton.innerHTML = '<i class="fa-solid fa-lightbulb"></i> Contoh AI';
                return;
            }

            // Tampilkan spinner dan status loading
            aiExamplesDiv.innerHTML = `<div class="loading-spinner"><i class="fa-solid fa-spinner fa-spin"></i> Memuat contoh...</div>`;
            aiExamplesDiv.classList.add('show');
            toggleButton.innerHTML = '<i class="fa-solid fa-lightbulb"></i> Sembunyikan Contoh';

            // Cek cache
            if (geminiCache.has(jpPhrase)) {
                aiExamplesDiv.innerHTML = geminiCache.get(jpPhrase);
                return;
            }

            // Prompt untuk Gemini
            const prompt = `Generate 2 short example sentences in Japanese using the phrase '${jpPhrase}'. Also provide the Indonesian translation for each sentence. Format the output as follows:
[Japanese Sentence 1]
[Indonesian Translation 1]

[Japanese Sentence 2]
[Indonesian Translation 2]

Do not include any other text, greetings, or explanations.`;

            try {
                const response = await fetchWithExponentialBackoff(GEMINI_API_URL, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        contents: [{
                            parts: [{ text: prompt }]
                        }],
                        safetySettings: [
                            { category: "HARM_CATEGORY_HARASSMENT", threshold: "BLOCK_NONE" },
                            { category: "HARM_CATEGORY_HATE_SPEECH", threshold: "BLOCK_NONE" },
                            { category: "HARM_CATEGORY_SEXUALLY_EXPLICIT", threshold: "BLOCK_NONE" },
                            { category: "HARM_CATEGORY_DANGEROUS_CONTENT", threshold: "BLOCK_NONE" },
                        ],
                    })
                });

                if (!response.ok) {
                    const errorData = await response.json();
                    console.error('Gemini API Error:', errorData);
                    throw new Error(errorData.error.message || 'Terjadi kesalahan saat menghubungi API.');
                }

                const result = await response.json();
                let generatedText = result.candidates?.[0]?.content?.parts?.[0]?.text || '';

                // Periksa apakah respons kosong atau tidak valid
                if (!generatedText.trim()) {
                    generatedText = 'Tidak dapat menghasilkan contoh. Respons API kosong atau tidak valid.';
                }

                // Format output
                const lines = generatedText.split('\n').filter(line => line.trim() !== '');
                let formattedHtml = '';
                if (lines.length >= 2) {
                    for (let i = 0; i < lines.length; i += 2) {
                        const jpLine = lines[i];
                        const idLine = lines[i+1] || '';
                        if (jpLine) {
                            formattedHtml += `<p class="phrase-jp" style="font-size: 16px; margin-bottom: 4px;">${jpLine}</p>`;
                            if (idLine) {
                                formattedHtml += `<p class="small" style="color: var(--ink); margin-bottom: 12px;">${idLine}</p>`;
                            }
                        }
                    }
                } else {
                    formattedHtml = `<p>Tidak dapat menghasilkan contoh. Format respons tidak sesuai: ${generatedText}</p>`;
                }

                aiExamplesDiv.innerHTML = formattedHtml;
                geminiCache.set(jpPhrase, formattedHtml); // Simpan ke cache

            } catch (error) {
                console.error('Fetch Error:', error);
                aiExamplesDiv.innerHTML = `<p style="color:var(--warn);">Error: ${error.message}. Coba lagi nanti.</p>`;
            }
        }

        function renderPhraseList() {
            phraseList.innerHTML = '';
            phrases.forEach(phrase => {
                const li = document.createElement('li');
                li.className = 'phrase-item';
                li.innerHTML = `
                    <div class="phrase-main-info" data-jp="${phrase.jp}">
                        <div class="phrase-jp">${phrase.jp}</div>
                        <div class="phrase-id">${phrase.id}</div>
                        <div class="phrase-actions">
                            <button class="btn-small" aria-label="Putar audio ungkapan ${phrase.jp}">
                                <i class="fa-solid fa-volume-up"></i>
                            </button>
                            <button class="btn-small btn-toggle-ai-examples" aria-label="Lihat contoh AI untuk ${phrase.jp}">
                                <i class="fa-solid fa-lightbulb"></i> Contoh AI
                            </button>
                        </div>
                    </div>
                    <div class="phrase-ai-examples" aria-live="polite">
                        <!-- Contoh AI akan dimuat di sini -->
                    </div>
                `;
                phraseList.appendChild(li);

                // Tambahkan listener klik untuk tombol audio secara langsung
                li.querySelector('.phrase-actions .btn-small:first-child').addEventListener('click', (e) => {
                    e.stopPropagation(); // Mencegah event click bubbling ke phrase-main-info
                    speak(phrase.jp);
                });

                // Tambahkan listener klik untuk tombol contoh AI
                li.querySelector('.btn-toggle-ai-examples').addEventListener('click', (e) => {
                    e.stopPropagation(); // Mencegah event click bubbling
                    fetchAIExamples(li, phrase.jp);
                });

                // Tambahkan listener klik untuk div info utama (untuk memutar audio jika tidak ada tombol yang diklik)
                li.querySelector('.phrase-main-info').addEventListener('click', (e) => {
                    // Hanya putar audio jika click bukan dari tombol mana pun
                    if (!e.target.closest('.phrase-actions')) {
                        speak(phrase.jp);
                    }
                });
            });
        }

        function speak(text) {
            try {
                if (!('speechSynthesis' in window)) {
                    // Menggunakan modal kustom sebagai ganti alert()
                    showCustomAlert('Maaf, browser Anda tidak mendukung audio.');
                    return;
                }
                speechSynthesis.cancel();
                const utterance = new SpeechSynthesisUtterance(text);
                utterance.lang = 'ja-JP';
                utterance.rate = 0.9;
                speechSynthesis.speak(utterance);
            } catch (error) {
                console.error('Error speaking text:', error);
            }
        }

        // Fungsi alert kustom (menggantikan window.alert)
        function showCustomAlert(message) {
            const alertBox = document.createElement('div');
            alertBox.style.cssText = `
                position: fixed;
                top: 50%;
                left: 50%;
                transform: translate(-50%, -50%);
                background-color: var(--panel);
                color: var(--ink);
                padding: 20px;
                border-radius: var(--radius);
                box-shadow: var(--shadow);
                z-index: 1000;
                text-align: center;
                border: 1px solid var(--border);
                max-width: 80%;
            `;
            alertBox.innerHTML = `
                <p>${message}</p>
                <button style="
                    background-color: var(--pri);
                    color: white;
                    border: none;
                    padding: 10px 20px;
                    border-radius: 8px;
                    cursor: pointer;
                    margin-top: 15px;
                    font-weight: 500;
                ">OK</button>
            `;
            document.body.appendChild(alertBox);

            alertBox.querySelector('button').addEventListener('click', () => {
                document.body.removeChild(alertBox);
            });
        }

        // Inisialisasi
        document.addEventListener('DOMContentLoaded', () => {
            renderPhraseList();
        });
    </script>
    <script>
    (() => {
      const sidebar  = document.getElementById('sidebar');
      const toggle   = document.getElementById('sidebarToggle');
      const closeBtn = document.getElementById('closeSidebar');

      function open(){ sidebar.classList.add('is-open'); document.body.classList.add('sidebar-open'); }
      function close(){ sidebar.classList.remove('is-open'); document.body.classList.remove('sidebar-open'); }

      toggle?.addEventListener('click', open);
      closeBtn?.addEventListener('click', close);

      document.addEventListener('click', (e)=>{
        if(!sidebar.classList.contains('is-open')) return;
        const hit = sidebar.contains(e.target) || toggle.contains(e.target);
        if(!hit) close();
      });
      document.addEventListener('keydown', (e)=>{ if(e.key==='Escape') close(); });

      // Tandai link aktif
      document.querySelectorAll('#sidebar a').forEach(a=>{
        const href = a.getAttribute('href');
        if(href && location.pathname.endsWith(href)) a.classList.add('active');
      });
    })();
    </script>
</body>
</html>
